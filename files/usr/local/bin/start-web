#!/bin/bash

LOG_DIR="/media/usbdata/rpms/logs"
if [ ! -d $LOG_DIR ]; then
  LOG_DIR="/tmp"
fi

# Start API in detached mode
if [ ! "$(ps -aux | grep [w]eb-interface/api/controller.py)" ]; then
  nohup python3 /usr/local/bin/rpmusicserver/web-interface/api/controller.py --logfile $LOG_DIR/api.log --production &
fi

# Start Web in detached mode
if [ ! "$(ps -aux | grep [w]eb-interface/web/controller.py)" ]; then
  nohup python3 /usr/local/bin/rpmusicserver/web-interface/web/controller.py --logfile $LOG_DIR/web.log --production &
fi
